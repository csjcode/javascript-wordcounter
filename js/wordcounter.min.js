function getSelectedText(){"use strict";var e="";return"undefined"!==window.getSelection?e=window.getSelection().toString():"undefined"!==document.selection&&"Text"===document.selection.type&&(e=document.selection.createRange().text),e}function doSomethingWithSelectedText(e){"use strict";var n=getSelectedText();if(n){var t=n.length,r=t+1,i=new Array(r).join("_");i=i.slice(0,-1);var a=e.replace(/sentence/,""),s=document.getElementById(e).innerText,d=s.replace(n,i);document.getElementById(e).innerText=d+" ";var o=(document.getElementById(e).innerText,s.indexOf(n));objAnswerKey={},objAnswerKey.sentenceId=a,objAnswerKey.wordIndex=o,objAnswerKey.selectedText=n,arrAnswerKey.push(objAnswerKey);var u=JSON.stringify(arrAnswerKey);return arrAnswerKeyDisplay.push(a+":"+o+" - "+n+"<br />"),answerKey.innerHTML=arrAnswerKeyDisplay.join(""),void(answerKeyJSON.innerHTML="<h3>JSON:</h3>"+u)}}var arrAnswerKey=[],objAnswerKey={},arrAnswerKeyDisplay=[],input=document.querySelectorAll("textarea")[0];input.addEventListener("keyup",function(){var e="";characterCount.innerHTML=input.value.length;var n=input.value.match(/\b[-?(\w+)?]+\b/gi);if(n?wordCount.innerHTML=n.length:wordCount.innerHTML=0,n){var t=input.value.split(/[.|!|?]+/g);sentenceCount.innerHTML=t.length,e='<h4 align="center">Line-by-Line Sentence Output</h4>';var r=[];for(i=0;i<t.length;i++){var a=i+1,s=t[i];s=s.replace(/\[[0-9]+\]/,"");var d='<div class="individualSentence" id="sentence'+i+'"><b>['+a+"]</b> "+s+". </div>";r.push(d)}var o=r.join("");o=e+o,sentencesOutput.innerHTML='<div id="sentenceLines">'+o+"</div>";for(var u=document.getElementsByClassName("individualSentence"),c=u.length,l=0;c>=l;l++)document.getElementById("sentence"+l).addEventListener("mouseup",function(){doSomethingWithSelectedText(this.id)});document.getElementById("textarea").disabled=!0}else sentenceCount.innerHTML=0;if(n){var v=input.value.replace(/\n$/gm,"").split(/\n/);paragraphCount.innerHTML=v.length}else paragraphCount.innerHTML=0});